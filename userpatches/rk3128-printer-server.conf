# RK3128 Printer Server Configuration
# 适用于电视盒子改造的打印机服务器

# 基础配置
BOARD_NAME="rk3128"
BOARDFAMILY="rockchip"
BOARD_MAINTAINER="Armbian"
BOARD_VENDOR="Rockchip"
VENDOR="Rockchip"

# 内核配置
BOOTCONFIG="rockchip_rk3128_defconfig"
BOOTCONFIG_EDGE="rockchip_rk3128_defconfig"
BOOTSOURCE='https://github.com/armbian/linux-rockchip'
BOOTSOURCE_TAG='branch:rk3128-legacy'
BOOTBRANCH="tag:rk3128-legacy"
LINUXFAMILY="rockchip-rk3128"
KERNEL_TARGET="legacy"

# U-Boot配置
BOOTLOADER="u-boot"
BOOTSOURCEDIR='u-boot-rockchip'
ARCH="arm"
UBOOT_TARGET_MAP=";;u-boot-dtb.img"
ATFSOURCE=""
ATF_COMPILE="no"

# 硬件配置
CPUMIN="408000"
CPUMAX="1296000"
GOVERNOR="ondemand"
DDR_FREQ=""

# 显示配置 - 为打印机服务器关闭不必要的显示功能
DISPLAY_MANAGER="none"
HAS_VIDEO_OUTPUT="no"
FORCE_HDMI_AUDIO="no"

# 存储配置
IMAGE_PARTITION_TABLE="msdos"
BOOTFS_TYPE="fat"
ROOTFS_TYPE="ext4"
BOOTSIZE="128"

# 网络配置 - 启用所有网络功能
WIREGUARD="no"
SERIALCON="ttyS2,115200"
EXTRA_BSP_NAME="printer-server"

# 打印机服务器专用包列表
PACKAGE_LIST_BOARD="cups cups-client cups-filters cups-ipp-utils printer-driver-all printer-driver-cups-pdf hplip avahi-daemon avahi-discover avahi-utils system-config-printer sane-airscan ippusbxd usbutils net-tools"

# 电源管理优化（电视盒子通常无电源管理芯片）
DISABLE_CPU_UTILS="yes"
DISABLE_CPU_TURBO="yes"

# 硬件加速关闭（打印机服务器不需要）
HW_MALI="no"

# 启用USB打印支持
ENABLE_USB_PRINTER="yes"

# 文件系统优化
ROOTFS_CACHE_MAX=2000
EXPERT="yes"

# 构建优化
BSPFREEZE="yes"
EXTERNAL="no"
BUILD_MINIMAL="no"
BUILD_DESKTOP="no"
INSTALL_HEADERS="no"
LOCALVERSION="printer-server"

# 内存优化（RK3128只有512MB-1GB内存）
SWAPFILE_SIZE=256
ZSWAP_ENABLED="yes"
